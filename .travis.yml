language: scala
scala:
- 2.12.7
jdk:
- oraclejdk8
before_install:
- ". $HOME/.nvm/nvm.sh"
- nvm install stable
- nvm use stable
- npm install
- npm install jsdom
- npm install -g json
- echo "//registry.npmjs.org/:_authToken=\${NPM_TOKEN}"
script:
- sbt clean fullOptJS::webpack
- json -I -f idealingua-sjs/target/scala-2.12/scalajs-bundler/main/package.json -e
  'delete this.private'
- json -I -f idealingua-sjs/target/scala-2.12/scalajs-bundler/main/package.json -e
  'this.license="MIT"'
- json -I -f idealingua-sjs/target/scala-2.12/scalajs-bundler/main/package.json -e
  'this.name="idealingua-js-facade"'
- json -I -f idealingua-sjs/target/scala-2.12/scalajs-bundler/main/package.json -e
  'this.description="Idealingua parser and typer"'
- json -I -f idealingua-sjs/target/scala-2.12/scalajs-bundler/main/package.json -e
  "this.version=\"0.1.$TRAVIS_BUILD_NUMBER\""
- cat idealingua-sjs/target/scala-2.12/scalajs-bundler/main/package.json
- npm publish idealingua-sjs/target/scala-2.12/scalajs-bundler/main
cache:
  directories:
  - "$HOME/.sbt"
  - "$HOME/.ivy2"
  - "$HOME/.coursier"
  - "$HOME/.cache/coursier"
  - "$HOME/.m2"
env:
  global:
    secure: HFQ6ZptMlQg0dOEQKRWgQUdUePDd4fsIJJvhet0AJ6egLrPUXlpYYVABJvCScUAvq3TKkwZEQmAAGt24orQX7QtGJ5FgwzdQMFkw3fvqTEQZl0JH4XDJNWRI2q3PuzBMGPE7Ad0RcaH58SXBmGD2u81wcI0xkbp1rMWdZjW2gvvsrZblogAxhcm75VcnCwJC9ADS4lUBFesiQpftx4Qe+xu0wNG3TrQT/ol8nvtaKkbj1JqRKEaR4m97N4sE4fydL4/h3yCEgfQATQJJZ2srbF2KDn466gTsmsAOHcZ88i6fDJdnrOXH7icH8/wAhbUmP0FLj1xU3C5/cfFnH9pX97CB0RIqsthAM7sy3kKxL7Iu/a0zkD/ePJ2YPUUk3+h+QDngLz4t8q3BLZGqCsPjwbe2d7MIH/QViz4CeRSJcTu9ZCORKfCrHll2kqR+XiLdfcLWj30Vf+ASSygHzEeWkYw3r7lJPeXodOxLsRYNWoqwY2G0pq1ldUxVOAML8Vh9w9Pugc1pLjzTYRu7AqHMFqXi5mwdhB4fxzbl9C5AVcGT+e6Xi5V3vhE5ORtWccHoJ6PBFUxGUebeNSmqGG8s3Px7gtebGhFdABI8DSr/kgRNOPdvCAJlDIrkjfassmL453QmkkmDmgIJC4nM50kEyWxzHLUN++7EGkQo1gXCBhY=
